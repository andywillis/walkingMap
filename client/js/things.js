var icon = L.Icon.extend({shadowUrl: null, iconSize: new L.Point(18, 18), shadowSize: null, iconAnchor: new L.Point(9, 18), popupAnchor: new L.Point(0,-18)})

var startingPoints = {
  type: 'FeatureCollection',
  features: [
    { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3078773021697998, 51.24703490785793]}
    , properties: {name: 'Eastry'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3398385047912598, 51.275320137101204]}
    , properties: {name: 'Sandwich Library'}
    }
  ]
}

var churches = {
  type: 'FeatureCollection',
  features: [
    { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.309744119644165, 51.245503665529945]}
    , properties: {name: 'St. Mary\'s, Eastry.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3400208950042725, 51.27505166703643]}
    , properties: {name: 'St. Mary\'s, Sandwich.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.317061185836792, 51.33169091288232]}
    , properties: {name: 'Abbey, Minster.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.2697899341583252, 51.341135162634636]}
    , properties: {name: 'Church of St. Mary Magdelene, Monkton.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.2515723705291748, 51.3541957192427]}
    , properties: {name: 'St. Nicholas At Wade.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3070619106292725, 51.2630024580254]}
    , properties: {name: 'St. Mary The Blessed Virgin, Woodnesborough.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3431429862976074, 51.273467661721156]}
    , properties: {name: 'St. Clements, Sandwich.'}
    }
  ]
}

var pubs = {
  type: 'FeatureCollection',
  features: [
    { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3449668884277344,51.23693314019542]}
    , properties: {name: 'The Crown, Finglesham.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3210201263427734, 51.24324700496246]}
    , properties: {name: 'The Blazing Donkey, Eastry.'}
    }
  ]
}

var castles = {
  type: 'FeatureCollection',
  features: [
    { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3320493698120117, 51.293941418366195]}
    , properties: {name: 'Richborough Roman Fort and Amphitheatre.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.3212347030639648, 51.12959947058639]}
    , properties: {name: 'Dover Castle.'}
    }
  , { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.1973059177398682, 51.379053425247115]}
    , properties: {name: 'Reculver Castle.'}
    }
  ]
}

var wantsum = {
  type: 'FeatureCollection',
  features: [
    { type: 'Feature'
    , geometry: {type: 'LineString', coordinates: [[1.2351036071777344,51.380673965734715],[1.2718391418457031,51.38045968268104],[1.2742424011230469,51.37842394363582],[1.2742424011230469,51.374780816209366],[1.2768173217773438,51.37328062064337],[1.2819671630859375,51.37113739884283],[1.2805938720703125,51.36910124520343],[1.2725257873535156,51.36695782776143],[1.2641143798828125,51.36545737585491],[1.2527847290039062,51.36395687478539],[1.23870849609375,51.36256350834222],[1.2351036071777344,51.36084853760247],[1.2311553955078125,51.35924069421347],[1.23046875,51.35709681523268],[1.2325286865234375,51.3532375802111],[1.234588623046875,51.350342940592625],[1.2412834167480469,51.346375915205684],[1.2447166442871094,51.34412420747759],[1.2419700622558594,51.34283746767439],[1.2359619140625,51.34026387968902],[1.2359619140625,51.33833359386697],[1.2359619140625,51.33822635338237],[1.2390518188476562,51.33661771600667],[1.2466049194335938,51.33629598175756],[1.2520980834960938,51.33458002762702],[1.2545013427734375,51.33297126229714],[1.2579345703125,51.33104066938517],[1.2627410888671875,51.33307851507538],[1.2660026550292969,51.33458002762702],[1.270294189453125,51.33511627019233],[1.2769889831542969,51.33490177391888],[1.2795639038085938,51.332756755987944],[1.2817955017089844,51.32975356228202],[1.2847137451171875,51.32975356228202],[1.2888336181640625,51.32975356228202],[1.2943267822265625,51.33104066938517],[1.2999916076660156,51.33071889599653],[1.3044548034667969,51.3296463017259],[1.3104629516601562,51.328573682365025],[1.3164710998535156,51.32835915548201],[1.3217926025390625,51.32771556881122],[1.3322639465332031,51.326750171868866],[1.3368988037109375,51.32599929352952],[1.3396453857421875,51.322995657225825],[1.3435935974121094,51.318918979022044],[1.3473701477050781,51.31462734736684],[1.3502883911132812,51.31226677882186],[1.3518333435058594,51.31215947736587],[1.3518333435058594,51.31838254702121],[1.3525199890136719,51.32117192492374],[1.355438232421875,51.32417568066263],[1.3629913330078125,51.330504379149616],[1.3700294494628906,51.33200597600252],[1.3762092590332031,51.33168420938816],[1.3811874389648438,51.33082615404365],[1.3844490051269531,51.32943177986094],[1.3885688781738281,51.32782283388363],[1.3926887512207031,51.32696470627908],[1.3974952697753906,51.32696470627908],[1.3932037353515625,51.321815603428284],[1.3889122009277344,51.31441275524505],[1.3847923278808594,51.30496970817108],[1.3859939575195312,51.28124621422736],[1.3873672485351562,51.2765215214227],[1.3930320739746094,51.26288161430283],[1.395263671875,51.25815503282625],[1.3988685607910156,51.251601468176545],[1.3998985290527344,51.244939510768184],[1.4026451110839844,51.23612705252836],[1.4045333862304688,51.22924786327828],[1.4045333862304688,51.2251628580361],[1.39251708984375,51.222905199579586],[1.3854789733886719,51.222152622151995],[1.3770675659179688,51.22494784771605],[1.3686561584472656,51.230000324695624],[1.3600730895996094,51.23752426217503],[1.3571548461914062,51.23967373262059],[1.3514900207519531,51.24483205193377],[1.3447952270507812,51.247733352339544],[1.3341522216796875,51.251386581388196],[1.3257408142089844,51.25235356402744],[1.3176727294921875,51.252998207822856],[1.3288307189941406,51.25375028082793],[1.3348388671875,51.25396515656995],[1.3420486450195312,51.25622129123259],[1.3468551635742188,51.259873845959326],[1.3514900207519531,51.26427801127602],[1.3521766662597656,51.2669632708317],[1.3535499572753906,51.27158155027075],[1.3494300842285156,51.276306751112685],[1.341705322265625,51.28006508658289],[1.3341522216796875,51.28113884024192],[1.325225830078125,51.28478941493801],[1.3214492797851562,51.28972796594161],[1.3207626342773438,51.29316316645825],[1.3188743591308594,51.29756414153878],[1.3140678405761719,51.29874481917398],[1.3082313537597656,51.3004621142536],[1.3003349304199219,51.301428064502886],[1.2811088562011719,51.30207202004265],[1.2752723693847656,51.302930613375416],[1.2672042846679688,51.302930613375416],[1.2623977661132812,51.30260864275778],[1.2584495544433594,51.29799348237416],[1.256561279296875,51.301750043402066],[1.256561279296875,51.30550629700758],[1.2570762634277344,51.31280328233772],[1.2570762634277344,51.31280328233772],[1.253814697265625,51.3155393526866],[1.2497806549072266,51.31816797246441],[1.2454032897949219,51.319991824204465],[1.2419700622558594,51.31988454081537],[1.2398242950439453,51.31822161619772],[1.2355327606201172,51.31521747052628],[1.232614517211914,51.31226677882186],[1.2297821044921875,51.30894031700003],[1.2239456176757812,51.294343957280205],[1.2206840515136719,51.28994267350323],[1.2174224853515625,51.28564833152335],[1.215362548828125,51.279850332839075],[1.2172508239746094,51.27695105903063],[1.22222900390625,51.27523288450222],[1.2284088134765625,51.27415899279088],[1.2390518188476562,51.27469594178418],[1.2478065490722656,51.2748033308298],[1.2569046020507812,51.2748033308298],[1.2635993957519531,51.27362203752229],[1.2672042846679688,51.274051602239176],[1.2678909301757812,51.27211852938559],[1.2618827819824219,51.27029277479139],[1.2553596496582031,51.271151962460564],[1.2493515014648438,51.27125935978962],[1.2421417236328125,51.27061497204998],[1.2359619140625,51.271151962460564],[1.2229156494140625,51.272333319274416],[1.2163925170898438,51.273729429078024],[1.2088394165039062,51.27566243415853],[1.2036895751953125,51.27931344408708],[1.2036895751953125,51.27662890620119],[1.2019729614257812,51.27018537520318],[1.1956214904785156,51.257832748209125],[1.1863517761230469,51.250634469720836],[1.1774253845214844,51.248807861598635],[1.1805152893066406,51.251708911194115],[1.1846351623535156,51.25482464949594],[1.190643310546875,51.25879959528236],[1.1911582946777344,51.26008869308224],[1.1932182312011719,51.26943357105703],[1.1957931518554688,51.27523288450222],[1.1997413635253906,51.28221256880128],[1.1999130249023438,51.29198234526849],[1.1999130249023438,51.296061416993226],[1.2005996704101562,51.300676771621255],[1.2038612365722656,51.30593556355968],[1.2072944641113281,51.308725698278856],[1.2133026123046875,51.31763153168122],[1.215362548828125,51.32192288230083],[1.2096977233886719,51.3244974999671],[1.2035179138183594,51.3254629443313],[1.1942481994628906,51.32245927289978],[1.1832618713378906,51.3187044069745],[1.1748504638671875,51.315914879019324],[1.1703872680664062,51.315592999493774],[1.1628341674804688,51.31430545880777],[1.1540794372558594,51.31269598213642],[1.1465263366699219,51.30915493471742],[1.1403465270996094,51.30711602587471],[1.1351966857910156,51.30486238965093],[1.1295318603515625,51.30056944306292],[1.1231803894042969,51.29906681689515],[1.1156272888183594,51.2948806703422],[1.1067008972167969,51.29123089779079],[1.0993194580078125,51.28886912565582],[1.0881614685058594,51.28425258391496],[1.0836982727050781,51.28178308038948],[1.0785484313964844,51.27888392856747],[1.0737419128417969,51.277487975392944],[1.0682487487792969,51.27555504712096],[1.0569190979003906,51.272655502225085],[1.0471343994140625,51.26846694765284],[1.0407829284667969,51.26331127942853],[1.0344314575195312,51.260948071532404],[1.0241317749023438,51.258047604871585],[1.0179519653320312,51.258047604871585],[1.0297966003417969,51.262989030960796],[1.0378646850585938,51.2658891858365],[1.0435295104980469,51.26954097240241],[1.0515975952148438,51.27340725365779],[1.0620689392089844,51.27727320960104],[1.0677337646484375,51.279420822339475],[1.0804367065429688,51.28564833152335],[1.0897064208984375,51.29058679016463],[1.09588623046875,51.295095353810204],[1.1036109924316406,51.29906681689515],[1.1125373840332031,51.301428064502886],[1.1180305480957031,51.30496970817108],[1.1286735534667969,51.308403768315024],[1.1334800720214844,51.31001339554934],[1.1372566223144531,51.31215947736587],[1.1473846435546875,51.317095084624896],[1.154937744140625,51.319777257175346],[1.1642074584960938,51.32160104493043],[1.1671257019042969,51.32417568066263],[1.175537109375,51.32717923968566],[1.1841201782226562,51.329002733120205],[1.193389892578125,51.332756755987944],[1.1985397338867188,51.336832204251635],[1.2035179138183594,51.33962046011348],[1.2047195434570312,51.342944697371145],[1.2047195434570312,51.34508923862242],[1.2018013000488281,51.34508923862242],[1.1980247497558594,51.344767563832],[1.1945915222167969,51.34573258142973],[1.1908149719238281,51.345196463050826],[1.1839485168457031,51.34466033840012],[1.1762237548828125,51.34251577707888],[1.168670654296875,51.34230131542749],[1.1583709716796875,51.34230131542749],[1.16180419921875,51.34444588678374],[1.1657524108886719,51.34508923862242],[1.1722755432128906,51.3461614716172],[1.1793136596679688,51.347662555663774],[1.1897850036621094,51.353451990685755],[1.1899566650390625,51.354416825404364],[1.1872100830078125,51.35656082980951],[1.1861801147460938,51.35966945796908],[1.187896728515625,51.36288505820705],[1.1904716491699219,51.36642195772421],[1.1939048767089844,51.37113739884283],[1.1954498291015625,51.37424503772196],[1.1983680725097656,51.377138167062725],[1.2004280090332031,51.379173963291514],[1.2028312683105469,51.38153108791741],[1.2066078186035156,51.38153108791741],[1.2119293212890625,51.3818525045977],[1.2199974060058594,51.382709604710044],[1.2251472473144531,51.38217391902082],[1.2285804748535156,51.38163822706163],[1.2335586547851562,51.38099538843422],[1.2342453002929688,51.380888247785194],[1.2347602844238281,51.38078110688536]]
    }
    , properties: {name: 'Crude indication of the Wantsum 30AD.'}
    }
  ]
}

var monuments = {
  type: 'FeatureCollection',
  features: [
    { type: 'Feature'
    , geometry: {type: 'Point', coordinates: [1.357133388519287,51.32862731392897]}
    , properties: {name: 'St. Augustine\'s Cross.'}
    }
  ]
}

var startingPointLayer = new L.GeoJSON(startingPoints, {
  pointToLayer: function (latlng) {
    return new L.Marker(latlng, {
      icon: new icon('images/star-18.png')
    });
  }
})

var monumentLayer = new L.GeoJSON(monuments, {
  pointToLayer: function (latlng) {
    return new L.Marker(latlng, {
      icon: new icon('images/monument-24.png')
    });
  }
})

var churchLayer = new L.GeoJSON(churches, {
  pointToLayer: function (latlng) {
    return new L.Marker(latlng, {
      icon: new icon('images/religious-christian-24.png')
    });
  }
})

var pubLayer = new L.GeoJSON(pubs, {
  pointToLayer: function (latlng) {
    return new L.Marker(latlng, {
      icon: new icon('images/beer-18.png')
    });
  }
})

var castleLayer = new L.GeoJSON(castles, {
  pointToLayer: function (latlng) {
    return new L.Marker(latlng, {
      icon: new icon('images/castle-18.png')
    });
  }
})